var M=Object.defineProperty;var E=(o,t,e)=>t in o?M(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var h=(o,t,e)=>E(o,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const n of r.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&s(n)}).observe(document,{childList:!0,subtree:!0});function e(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=e(i);fetch(i.href,r)}})();const R=(o=500,t=500,e)=>{var s=document.createElement("canvas");s.width=o,s.height=t,s.style.willChange="transform",s.style.outline="solid black 1px";var i=s.getContext("2d");return{canvas:s,context:i}},O=(o,t)=>{var e=o.getBoundingClientRect();return{x:t.clientX-e.left,y:t.clientY-e.top}};class S{constructor(t,e,s){h(this,"world");h(this,"pos");h(this,"color");h(this,"state");h(this,"checkbelow",()=>this.pos.y+1>this.world.size-1?!0:!!this.world.grid[this.pos.x][this.pos.y+1]);h(this,"checkleft",()=>this.pos.x-1<0?!0:!!this.world.grid[this.pos.x-1][this.pos.y+1]);h(this,"checkright",()=>this.pos.x+1>this.world.size-1?!0:!!this.world.grid[this.pos.x+1][this.pos.y+1]);h(this,"getbelow",()=>{if(!(this.pos.y+1>this.world.size-1))return this.world.grid[this.pos.x][this.pos.y+1]});h(this,"getleft",()=>{if(!(this.pos.x-1<0))return this.world.grid[this.pos.x-1][this.pos.y+1]});h(this,"getright",()=>{if(!(this.pos.x+1>this.world.size-1))return this.world.grid[this.pos.x+1][this.pos.y+1]});h(this,"gobelow",()=>{this.pos.y+1>this.world.size-1||(this.world.grid[this.pos.x][this.pos.y]=void 0,this.pos.y++,this.world.grid[this.pos.x][this.pos.y]=this)});h(this,"goleft",()=>{this.pos.x-1<0||(this.world.grid[this.pos.x][this.pos.y]=void 0,this.pos.y++,this.pos.x--,this.world.grid[this.pos.x][this.pos.y]=this)});h(this,"goright",()=>{this.pos.x+1>this.world.size-1||(this.world.grid[this.pos.x][this.pos.y]=void 0,this.pos.y++,this.pos.x++,this.world.grid[this.pos.x][this.pos.y]=this)});this.world=t,this.pos=e,this.color=s,this.state=0}draw(){this.world.ctx.fillStyle=this.color,this.world.ctx.fillRect(this.pos.x*this.world.width,this.pos.y*this.world.height,this.world.width,this.world.height)}clear(t){const e=Math.floor(this.pos.x*this.world.width),s=Math.floor(this.pos.y*this.world.height),i=Math.ceil(this.world.width),r=Math.ceil(this.world.height);this.world.ctx.clearRect(e,s,i,r),t.clearRect(e,s,i,r)}update(){var n,l,c,w,x;const{x:t,y:e}=this.pos;if(e>=this.world.size-1){this.state=1;return}const s=this.checkbelow(),i=this.checkleft(),r=this.checkright();if(s){if(i&&r){if((n=this.getbelow())!=null&&n.state){if((l=this.getright())!=null&&l.state&&((c=this.getleft())!=null&&c.state)){this.state=1;return}if(this.pos.x+1>this.world.size-1&&((w=this.getleft())!=null&&w.state)){this.state=1;return}if(this.pos.x-1<0&&((x=this.getright())!=null&&x.state)){this.state=1;return}}return}if(!i&&!r)return Math.round(Math.random())?this.goright:this.goleft;if(!i)return this.goleft;if(!r)return this.goright}return this.gobelow}}const L=(o,t,e,s)=>{const{x:i,y:r}=t,n=[];for(let l=-e;l<=e;l++)for(let c=-e;c<=e;c++)l*l+c*c<=e*e&&n.push(new S(o,{x:i+l,y:r+c},s));return n},P=(o="slider")=>{const t=document.createElement("input");t.type="range",t.min="1",t.max="100",t.value="3",t.id=o;const e=document.createElement("label");e.htmlFor=o,e.textContent="Size: ";const s=document.createElement("span");s.textContent=t.value,t.oninput=()=>{s.textContent=t.value};const i=document.createElement("div");return i.appendChild(e),i.appendChild(t),i.appendChild(s),i.value=()=>t.value,i};class N{constructor(t,e,s,i=!1){h(this,"canvas");h(this,"ctx");h(this,"width");h(this,"height");h(this,"grid",[]);h(this,"size",0);h(this,"debug",!1);this.canvas=t,this.ctx=e,this.size=s,this.debug=i,this.width=t.width/this.size,this.height=t.height/this.size;for(let n=0;n<s;n++){var r=[];for(let l=0;l<s;l++)r.push(null);this.grid.push(r)}}draw(){if(this.debug){this.ctx.fillStyle="#000000";for(let t=1;t<this.size;t++)this.ctx.fillRect(t*this.width,0,1,this.canvas.height),this.ctx.fillRect(0,t*this.height,this.canvas.width,1)}}selection(t){if(!((t==null?void 0:t.x)===void 0||(t==null?void 0:t.y)===void 0||!t)){var e=Math.floor(t.x/this.width),s=Math.floor(t.y/this.height);return{x:e,y:s}}}add(t){return t.pos.x>this.size-1||t.pos.x<0||t.pos.y<0||this.grid[t.pos.x][t.pos.y]?!1:(this.grid[t.pos.x][t.pos.y]=t,!0)}}const{canvas:u,context:y}=R(500,500);document.body.appendChild(u);const m=P();document.body.appendChild(m);const b=document.createElement("div");b.id="wheel";document.body.appendChild(b);const v="#cf0d26";let g=!1,C=v,d={};const F=Raphael.colorwheel($("#wheel")[0],150).color(v);F.onchange(function(o){C=o.hex});const f=document.createElement("canvas");f.width=u.width;f.height=u.height;const k=f.getContext("2d");u.onmousemove=o=>d=O(u,o);u.onmousedown=()=>{g=!0};u.onmouseup=()=>g=!1;const p=new N(f,k,250,!1),a=[],z=()=>{g&&(d==null?void 0:d.x)!==void 0&&(d==null?void 0:d.y)!==void 0&&L(p,p.selection(d),Number(m.value()),C).forEach(t=>{p.add(t)&&a.push(t)});const o=[];for(const t of a){if(!t||t.state)continue;t.clear(y);const e=t.update();e&&o.push(e)}for(const t of o)t();for(let t=0;t<a.length;t++){const e=a[t];e.draw(),e.state&&a.splice(t,1)}y.drawImage(f,0,0),window.requestAnimationFrame(z)};z();
